extends layout

block content
  h1 TABR
  p Welcome to TABR

  if( user )
    p Logged in as #{user.email}

  if( message )
    .message= message

  .tabs
    each tab in tabs
      .tab
        h2= tab.title

        .tasks
          each task in tab.tasks
            .task(data-id=`${task.id}`)
              input(type='checkbox', checked=( task.completed ? "checked" : undefined))
              span.description= task.description

    .add-tab
      form(action='/tabs', method='post')
        input(type='text', name='new-tab' placeholder='Tab Title')
        button(type='submit') Create Tab

    .add-task
      form(action='/tasks', method='post' )
        select(name='tab-id')
          each tab in tabs
            option(label=`${tab.title}`, value=`${tab.id}`)
        input(type='text', name='new-task' placeholder='Task Description')
        button(type='submit') Create Task
